{% extends base_html %}
{% load custom_filters %}
{% block content %}
  <div>
    <br><br>
    {% if not messages %}
   <div style="margin:0 auto;width:90%;">
            <h6 class="text-center alert alert-dark">You have 0 Notifications</h6>

    </div>

    {% else %}
    {% for message in messages %}
  <div class="accordion" id="accordionExample">
    <div class="accordion-item">
      <h2 class="accordion-header" id="heading{{ forloop.counter }}">
        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse{{ forloop.counter }}" aria-expanded="true" aria-controls="collapse{{ forloop.counter }}">
          {{ message.about }} <small style="position:absolute;right:45px;"> {{ message.date|timesince }} ago.</small>
        </button>
      </h2>
      <div id="collapse{{ forloop.counter }}" class="accordion-collapse collapse" aria-labelledby="heading{{ forloop.counter }}" data-bs-parent="#accordionExample">
        <div class="accordion-body">
          {{ message.message }}
          {{ message.notification_type }}
          <br>
          {% if message.notification_type == 'quiz' %}
            {% if user|test_is_done:message.uuid %}
                <a href="{% url 'test-detail' 'Topical' message.uuid %}"><button class="btn btn-warning">View Results</button></a>
                {% else %}
                <a href="{% url 'start' message.topic message.uuid %}"><button class="btn btn-info">Take Test</button></a>

                {% endif %}
            {% elif message.notification_type == 'results' %}
                <a href="{% url 'test-detail' message.test %}"><button class="btn btn-warning">View Results</button></a>
          {% elif message.notification_type == 'retake' %}
                <a href="{% url 'retake' message.subject message.uuid %}"><button class="btn btn-info">View Test</button></a>
            {% elif message.notification_type == 'class-test' %}
              {% if user|test_is_done:message.test.uuid %}
                <a href="{% url 'test-detail' message.test.uuid %}"><button class="btn btn-warning">View Result</button></a>
              {% else %}
                <a href="{% url 'assignment-lobby' message.test.uuid %}"><button class="btn btn-warning">View Test</button></a>
              {% endif %}

            {% else %}


          {% endif %}
        </div>
      </div>
    </div>
  </div>
  <br>
{% endfor %}

  </div>
{% endif %}


























{% endblock %}